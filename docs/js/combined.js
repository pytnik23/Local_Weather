function hideLoader(){document.getElementById("loader").style.display="none"}var weatherApp=function(){function e(){return navigator.geolocation?void navigator.geolocation.getCurrentPosition(function(e){a=e.coords.latitude,s=e.coords.longitude;var t=a+","+s,n="php_proxy_simple.php?yws_path="+encodeURIComponent(t),o=null;window.XMLHttpRequest?(o=new XMLHttpRequest,"undefined"!=typeof o.overrideMimeType&&o.overrideMimeType("application/json")):window.ActiveXObject?o=new ActiveXObject("Microsoft.XMLHTTP"):alert("Perhaps your browser does not support xmlhttprequests?"),o.open("GET",n,!0),o.onreadystatechange=function(){4==o.readyState&&200==o.status&&consile.log(o.responseText)},o.send(null)}):void console.log("Geolocation API не поддерживается в вашем браузере")}function t(){r.innerHTML=y.name,c.innerHTML=y.sys.country,o(),d.style.backgroundImage="url('images/weather-icons/"+y.weather[0].icon+".png')",p.innerHTML=y.wind.speed,g.style.transform="rotate("+y.wind.deg+"deg)"}function n(){"C"===f?y.currentTemp=y.currentTempC:"F"===f?y.currentTemp=y.currentTempF:console.log("Error! setCurrentTemp function")}function o(){"C"===f?(u.classList.remove("active"),m.classList.add("active")):"F"===f?(m.classList.remove("active"),u.classList.add("active")):console.log("Error! How it happend? WTF???"),n(),i.innerHTML=y.currentTemp.toFixed(1)}var a,s,r=document.getElementsByClassName("city")[0],c=document.getElementsByClassName("country")[0],i=document.getElementsByClassName("temperature__value")[0],l=document.getElementsByClassName("temperature__scales")[0],m=document.getElementsByClassName("temperature__scale_c")[0],u=document.getElementsByClassName("temperature__scale_f")[0],d=document.getElementsByClassName("weather-icon")[0],p=document.getElementsByClassName("wind__speed")[0],g=document.getElementsByClassName("wind__direction")[0],y=JSON.parse(localStorage.getItem("currentWeather")),_=(new Date).getTime(),f=JSON.parse(localStorage.getItem("currentTempScale"))||"C";y?y.lastUpdate+6e4>_?(console.log("1 minute not left"),t(),hideLoader()):(console.log("1 minute left"),e()):(console.log("It's first init"),e()),l.addEventListener("click",function(e){var t=e.target;"A"===t.tagName&&(e.preventDefault(),t.classList.contains("temperature__scale_c")?(f="C",o()):t.classList.contains("temperature__scale_f")?(f="F",o()):console.log("Error! What did you click?!?!?"))}),window.onunload=function(){localStorage.setItem("currentTempScale",JSON.stringify(f))}};weatherApp();