function hideLoader(){document.getElementById("loader").style.display="none"}var weatherApp=function(){function e(){return navigator.geolocation?void navigator.geolocation.getCurrentPosition(function(e){s=e.coords.latitude,i=e.coords.longitude,t(),hideLoader()}):void console.log("Geolocation API не поддерживается в вашем браузере")}function t(){f={coord:{lon:30.47,lat:50.48},weather:[{id:801,main:"Clouds",description:"few clouds",icon:"02d"}],base:"stations",main:{temp:295.944,pressure:1015.8,humidity:64,temp_min:295.944,temp_max:295.944,sea_level:1030.09,grnd_level:1015.8},wind:{speed:7.36,deg:234},clouds:{all:12},dt:1475235561,sys:{message:.0035,country:"UA",sunrise:1475207874,sunset:1475249811},id:703625,name:"Kurenëvka",cod:200},f.lastUpdate=(new Date).getTime(),f.currentTempC=a(f.main.temp,"C"),f.currentTempF=a(f.main.temp,"F"),o(),localStorage.setItem("currentWeather",JSON.stringify(f)),n()}function n(){c.innerHTML=f.name,l.innerHTML=f.sys.country,r(),p.innerHTML=f.wind.speed,_.innerHTML=f.wind.deg}function a(e,t){var n;if("C"===t)n=300-e;else{if("F"!==t)return void console.log("Error! Wrong temperature scale!");n=9*e/5-459.67}return n}function o(){"C"===v?f.currentTemp=f.currentTempC:"F"===v?f.currentTemp=f.currentTempF:console.log("Error! setCurrentTemp function")}function r(){"C"===v?(g.classList.remove("active"),d.classList.add("active")):"F"===v?(d.classList.remove("active"),g.classList.add("active")):console.log("Error! How it happend? WTF???"),o(),m.innerHTML=f.currentTemp.toFixed(1)}var s,i,c=document.getElementsByClassName("city")[0],l=document.getElementsByClassName("country")[0],m=document.getElementsByClassName("temperature__value")[0],u=document.getElementsByClassName("temperature__scales")[0],d=document.getElementsByClassName("temperature__scale_c")[0],g=document.getElementsByClassName("temperature__scale_f")[0],p=(document.getElementsByClassName("weather-image__item")[0],document.getElementsByClassName("wind__speed")[0]),_=document.getElementsByClassName("wind__direction")[0],f=JSON.parse(localStorage.getItem("currentWeather")),y=(new Date).getTime(),v=JSON.parse(localStorage.getItem("currentTempScale"))||"C";f?f.lastUpdate+6e4>y?(console.log("1 minute not left"),n(),hideLoader()):(console.log("1 minute left"),e()):(console.log("It's first init"),e()),u.addEventListener("click",function(e){var t=e.target;"A"===t.tagName&&(e.preventDefault(),t.classList.contains("temperature__scale_c")?(v="C",r()):t.classList.contains("temperature__scale_f")?(v="F",r()):console.log("Error! What did you click?!?!?"))}),window.onunload=function(){localStorage.setItem("currentTempScale",JSON.stringify(v))}};weatherApp();